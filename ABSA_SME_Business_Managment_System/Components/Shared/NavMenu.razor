@namespace ABSA_SME_Business_Managment_System
@inject NavigationManager Navigation

<div class="top-navbar">
    <a href="/employee/hr/dashboard" class="profile-avatar">
        <img src="https://i.pravatar.cc/150?img=5" alt="Profile" />
    </a>
    <div class="logo">@PageName</div>
    <nav>
        @if (UserRole == "Employee")
        {
            <a href="/employee/dashboard">Dashboard</a>
            //change to "/" when working in the employee dashboard
            <a href="/employee/inventory/dashboard">Inventory</a>
            <a href="/employee/finance/dashboard">Finance</a>
            <a href="/settings">Settings</a>
        }
        else if (UserRole == "Manager")
        {

            <a href="/manager/dashboard">Dashboard</a>
            //change to "/" when working in the manager dashboard
            <a href="/manager/inventory/dashboard">Inventory</a>
            <a href="/manager/finance/dashboard">Finances</a>
            <a href="/manager/crm/dashboard">Employees</a>
            <a href="/settings">Settings</a>
        }
    </nav>
    <input type="text" placeholder="Search in site" class="search-bar" />
</div>

@code {
    private string UserRole = "Manager"; //change to "Employee" to test employee view

    private string PageName => GetPageName(Navigation.Uri);

    private string GetPageName(string uri)
    {
        var segments = new Uri(uri).AbsolutePath.Split('/', StringSplitOptions.RemoveEmptyEntries);
        if (segments.Length == 0) return "Dashboard";

        var lastSegment = segments[^1];


        var words = lastSegment.Split('-', StringSplitOptions.RemoveEmptyEntries)
                               .Select(w => char.ToUpper(w[0]) + w[1..]);
        return string.Join(' ', words);
    }

}